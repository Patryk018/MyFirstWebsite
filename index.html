<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie-Einstellungen</title>
<style>
    body {
        background-color: black;
        color: #333;
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 20%;
        cursor: default;
    }
    .cookie-box {
        background: white;
        padding: 20px;
        border-radius: 10px;
        display: inline-block;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    button {
        padding: 10px 20px;
        margin: 5px;
        border: none;
        background-color: #4cafef;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background-color: #3793d6;
    }
    img {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        object-fit: cover;
        z-index: 9999;
        display: none;
        animation: shake 0.1s infinite;
    }
    @keyframes shake {
        0% { transform: translate(1px, 1px) rotate(0deg); }
        25% { transform: translate(-1px, 2px) rotate(-1deg); }
        50% { transform: translate(-3px, 1px) rotate(1deg); }
        75% { transform: translate(3px, 1px) rotate(0deg); }
        100% { transform: translate(1px, -2px) rotate(1deg); }
    }
    .flash {
        animation: flash-bg 0.2s infinite;
    }
    @keyframes flash-bg {
        0% { background-color: black; }
        50% { background-color: white; }
        100% { background-color: black; }
    }
    .popup {
        display: none;
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.4);
        z-index: 10000;
    }
</style>
</head>
<body>

<div class="cookie-box">
    <h1>Do you accept cookies?</h1>
    <p>We use cookies to improve your experience. Please select an option.</p>
    <button type="button" class="cookie-btn" id="acceptBtn">I accept</button>
    <button type="button" class="cookie-btn" id="declineBtn">I don't accept</button>
</div>

<img id="scare" src="https://media.tenor.com/rpLjR-cCx6AAAAAi/scary-rooms-low-detailed.gif" alt="Scare">
<img id="scare2" src="https://media.tenor.com/O_x4UCmt5p0AAAAj/among-us-twerk.gif" alt="Scare">
<img id="scare3" src="https://media1.tenor.com/m/u6yAHXKFe0YAAAAd/scary-demon-girl.gif" alt="Scare">
<img id="scare4" src="https://media1.tenor.com/m/NGe9XWLgm6MAAAAC/black-dark.gif" alt="Scare">

<audio id="scream" src="Soundtrack.mp3"></audio>

<div class="popup" id="closePopup">
    <p>Do you want to close this site?</p>
    <button id="popupYes">Yes</button>
    <button id="popupNo">No</button>
</div>

<script>
function lockMouse() {
    let body = document.body;
    body.requestPointerLock = body.requestPointerLock || body.mozRequestPointerLock || body.webkitRequestPointerLock;
    if (body.requestPointerLock) {
        body.requestPointerLock();
    }
}

function startJumpscare() {
    let images = [
        document.getElementById("scare"),  // Erstes Bild
        document.getElementById("scare2"), // Danach in Schleife
        document.getElementById("scare3"),
        document.getElementById("scare4")
    ];

    let audio = document.getElementById("scream");
    document.body.style.cursor = "none";
    lockMouse();

    audio.currentTime = 0;
    audio.loop = true;
    audio.play().catch(() => console.log("Autoplay blockiert."));

    document.body.classList.add("flash");

    // Erstes Bild anzeigen
    images.forEach(img => img.style.display = "none");
    images[0].style.display = "block";

    // Nach 2 Sekunden auf Loop umsteigen
    setTimeout(() => {
        let index = 1; // Start bei scare2
        setInterval(() => {
            // Erst alle ausblenden
            images.forEach(img => img.style.display = "none");
            // Dann aktuelles anzeigen
            images[index].style.display = "block";
            // NÃ¤chstes Bild vorbereiten (nur scare2 bis scare4)
            index++;
            if (index > 3) index = 1;
        }, 1500);
    }, 2000);
}

document.getElementById("acceptBtn").addEventListener("click", startJumpscare);
document.getElementById("declineBtn").addEventListener("click", startJumpscare);

window.onbeforeunload = function() {
    return "Are you sure you want to leave? :)";
};

document.addEventListener("keydown", function(e) {
    if (e.key === "Escape") {
        e.preventDefault();
        showPopup();
    }
});

function showPopup() {
    let popup = document.getElementById("closePopup");
    popup.style.display = "block";
    popup.focus();
    setTimeout(() => {
        if (popup.style.display === "block") {
            showPopup();
        }
    }, 1000);
}

document.getElementById("popupYes").addEventListener("click", showPopup);
document.getElementById("popupNo").addEventListener("click", showPopup);

document.addEventListener("click", function(e) {
    let popup = document.getElementById("closePopup");
    if (popup.style.display === "block" && !popup.contains(e.target)) {
        showPopup();
    }
});
</script>

</body>
</html>


